<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #mapid { height: 800px; }
    </style>
</head>
<body>
<!-- Load d3.js and the geo projection plugin -->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>

<!-- Load Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>

<!-- Create an element where the map will take place -->
<div id="mapid"></div>
<script>

    let data = [{
        "Chart1": [
            {
                "5": "7"
            },
            {
                "5": "5"
            },
            {
                "5": "7"
            },
            {
                "5": "3"
            },
            {
                "5": "250"
            },
            {
                "5": "200"
            },
            {
                "5": "140"
            },
            {
                "5": "85"
            },
            {
                "5": "150"
            },
            {
                "5": "50"
            },
            {
                "5": "26"
            },
            {
                "5": "220"
            },
            {
                "5": "14"
            },
            {
                "5": "190"
            },
            {
                "5": "90"
            },
            {
                "5": "200"
            },
            {
                "5": "155"
            },
            {
                "5": "135"
            },
            {
                "5": "20"
            },
            {
                "5": "165"
            },
            {
                "5": "150"
            },
            {
                "5": "500"
            },
            {
                "5": "400"
            },
            {
                "5": "75"
            },
            {
                "5": "115"
            },
            {
                "5": "150"
            },
            {
                "5": "65"
            },
            {
                "5": "35"
            },
            {
                "5": "3"
            },
            {
                "5": "10"
            },
            {
                "5": "20"
            },
            {
                "5": "150"
            },
            {
                "5": "10"
            },
            {
                "5": "250"
            },
            {
                "5": "50"
            },
            {
                "5": "30"
            },
            {
                "5": "60"
            },
            {
                "5": "65"
            },
            {
                "5": "50"
            },
            {
                "5": "130"
            },
            {
                "5": "10"
            },
            {
                "5": "6"
            },
            {
                "5": "60"
            },
            {
                "5": "30"
            },
            {
                "5": "230"
            },
            {
                "5": "10"
            },
            {
                "5": "30"
            },
            {
                "5": "30"
            },
            {
                "5": "160"
            },
            {
                "5": "10"
            },
            {
                "5": "96"
            },
            {
                "5": "170"
            },
            {
                "5": "420"
            },
            {
                "5": "4"
            },
            {
                "5": "150"
            },
            {
                "5": "27"
            },
            {
                "5": "50"
            },
            {
                "5": "35"
            },
            {
                "5": "150"
            },
            {
                "5": "180"
            },
            {
                "5": "80"
            },
            {
                "5": "160"
            },
            {
                "5": "24"
            },
            {
                "5": "300"
            },
            {
                "5": "96"
            },
            {
                "5": "270"
            },
            {
                "5": "348"
            },
            {
                "5": "470"
            },
            {
                "5": "263"
            },
            {
                "5": "180"
            },
            {
                "5": "215"
            },
            {
                "5": "20"
            },
            {
                "5": "40"
            },
            {
                "5": "40"
            },
            {
                "5": "210"
            },
            {
                "5": "240"
            },
            {
                "5": "300"
            },
            {
                "5": "30"
            },
            {
                "5": "60"
            },
            {
                "5": "30"
            },
            {
                "5": "35"
            },
            {
                "5": "300"
            },
            {
                "5": "80"
            },
            {
                "5": "190"
            },
            {
                "5": "220"
            },
            {
                "5": "205"
            },
            {
                "5": "9"
            },
            {
                "5": "93"
            },
            {
                "5": "35"
            },
            {
                "5": "10"
            },
            {
                "5": "40"
            },
            {
                "5": "13"
            },
            {
                "5": "50"
            },
            {
                "5": "150"
            },
            {
                "5": "71"
            },
            {
                "5": "40"
            },
            {
                "5": "30"
            },
            {
                "5": "100"
            },
            {
                "5": "400"
            },
            {
                "5": "20"
            },
            {
                "5": "90"
            },
            {
                "5": "110"
            },
            {
                "5": "170"
            },
            {
                "5": "20"
            },
            {
                "5": "7"
            },
            {
                "5": "50"
            },
            {
                "5": "135"
            },
            {
                "5": "7"
            },
            {
                "5": "2"
            },
            {
                "5": "32"
            },
            {
                "5": "320"
            },
            {
                "5": "240"
            },
            {
                "5": "42"
            },
            {
                "5": "320"
            },
            {
                "5": "210"
            },
            {
                "5": "180"
            },
            {
                "5": "140"
            },
            {
                "5": "15"
            },
            {
                "5": "180"
            },
            {
                "5": "70"
            },
            {
                "5": "200"
            },
            {
                "5": "14"
            },
            {
                "5": "6"
            },
            {
                "5": "5"
            },
            {
                "5": "25"
            }
        ],
        "Copper Smelters": [
            {
                "Facility ": "Type"
            },
            {
                "Country": "Albania"
            },
            {
                "Location (Name)": "Kukes (Gjegian)",
                "Latitude": "42.08",
                "Longitude": "20.42",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Albanian Government",
                "Status": "Operating",
                "Capacity 1/": "5",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Lac ",
                "Latitude": "41.63",
                "Longitude": "19.71",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Albanian Government",
                "Status": "Operating",
                "Capacity 1/": "7",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Rubik ",
                "Latitude": "41.77",
                "Longitude": "19.79",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Albanian Government",
                "Status": "Operating",
                "Capacity 1/": "5",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Country": "Armenia"
            },
            {
                "Location (Name)": "Alaverdi",
                "Latitude": "41.13",
                "Longitude": "44.65",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Armenian Copper Programme cjsc",
                "Status": "Operating",
                "Capacity 1/": "7",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Capacity 1/": "3",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Country": "Australia"
            },
            {
                "Location (Name)": "Mount Isa, Queensland",
                "Latitude": "-20.73",
                "Longitude": "139.50",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Mount Isa Mines Ltd.",
                "Status": "Operating",
                "Capacity 1/": "250",
                "Process Type 2/": "Isasmelt/Reverberatory"
            },
            {
                "Location (Name)": "Roxby Downs, South Australia (Olympic Dams) ",
                "Latitude": "-30.50",
                "Longitude": "136.90",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Olympic Dam Corp.",
                "Status": "Operating",
                "Capacity 1/": "200",
                "Process Type 2/": "Outokumpu Continuous"
            },
            {
                "Location (Name)": "Port Kembla, New South Wales",
                "Latitude": "-34.47",
                "Longitude": "150.90",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Port Kembla Copper Pty Ltd.",
                "Status": "Operating",
                "Capacity 1/": "140",
                "Process Type 2/": "Noranda Continuous"
            },
            {
                "Country": "Austria"
            },
            {
                "Location (Name)": "Brixlegg",
                "Latitude": "47.42",
                "Longitude": "11.88",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Montanwerke Brixlegg",
                "Status": "Operating",
                "Capacity 1/": "85",
                "Process Type 2/": "Blast Furnace (S)"
            },
            {
                "Country": "Belgium"
            },
            {
                "Location (Name)": "Beerse",
                "Latitude": "51.32",
                "Longitude": "4.87",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Metallo-Chemique N V",
                "Status": "Operating",
                "Capacity 1/": "150",
                "Process Type 2/": "TBRC (S)"
            },
            {
                "Location (Name)": "Hoboken",
                "Latitude": "51.17",
                "Longitude": "4.35",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Umicore",
                "Status": "Operating",
                "Capacity 1/": "50",
                "Process Type 2/": "Isasmelt (S)"
            },
            {
                "Country": "Botswana"
            },
            {
                "Location (Name)": "Selebi-Phikwe",
                "Latitude": "-22.02",
                "Longitude": "27.83",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Botswana Consolidated Ltd.",
                "Status": "Operating",
                "Capacity 1/": "26",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Country": "Brazil"
            },
            {
                "Location (Name)": "Camacari, Bahia",
                "Latitude": "-12.68",
                "Longitude": "-38.33",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Caraiba Metais S.A.",
                "Status": "Operating",
                "Capacity 1/": "220",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Country": "Bulgaria"
            },
            {
                "Location (Name)": "Eliseina",
                "Latitude": "43.08",
                "Longitude": "23.48",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Eliseina Ltd.",
                "Status": "Operating",
                "Capacity 1/": "14",
                "Process Type 2/": "Blast Furnace (S)"
            },
            {
                "Location (Name)": "Pirdop ",
                "Latitude": "42.70",
                "Longitude": "24.18",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Umicore",
                "Status": "Operating",
                "Capacity 1/": "190",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Country": "Canada"
            },
            {
                "Location (Name)": "Flin Flon, Manitoba",
                "Latitude": "54.77",
                "Longitude": "-101.88",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Hudson Bay Mining & Smelting",
                "Status": "Operating",
                "Capacity 1/": "90",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Noranda, Quebec (Horne)",
                "Latitude": "48.25",
                "Longitude": "-79.02",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Noranda Inc.",
                "Status": "Operating",
                "Capacity 1/": "200",
                "Process Type 2/": "Noranda Continuous"
            },
            {
                "Location (Name)": "Timmins, Ontario (Kidd Creek)",
                "Latitude": "48.47",
                "Longitude": "-81.33",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Falconbridge Ltd.",
                "Status": "Operating",
                "Capacity 1/": "155",
                "Process Type 2/": "Mitsubishi Continuous"
            },
            {
                "Location (Name)": "Copper Cliff, Ontario",
                "Latitude": "46.47",
                "Longitude": "-81.07",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Inco Ltd.",
                "Status": "Operating",
                "Capacity 1/": "135",
                "Process Type 2/": "Inco Flash"
            },
            {
                "Location (Name)": "Sudbury, Ontario",
                "Latitude": "46.50",
                "Longitude": "-80.97",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Falconbridge Ltd.",
                "Status": "Operating",
                "Capacity 1/": "20",
                "Process Type 2/": "Electric"
            },
            {
                "Country": "Chile"
            },
            {
                "Location (Name)": "La Negra (Altonorte)",
                "Latitude": "-23.80",
                "Longitude": "-70.33",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Noranda Chile S.A.",
                "Status": "Operating",
                "Capacity 1/": "165",
                "Process Type 2/": "Noranda Continuous"
            },
            {
                "Location (Name)": "Chagres",
                "Latitude": "-32.80",
                "Longitude": "-70.97",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Cia Minera Disputada de Las Condes S.A.",
                "Status": "Operating",
                "Capacity 1/": "150",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Chuquicamata",
                "Latitude": "-22.32",
                "Longitude": "-68.93",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Codelco Chile",
                "Status": "Operating",
                "Capacity 1/": "500",
                "Process Type 2/": "Outokumpu/Teniente Converter"
            },
            {
                "Location (Name)": "El Teniente (Caletones)",
                "Latitude": "-34.10",
                "Longitude": "-70.33",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Codelco Chile",
                "Status": "Operating",
                "Capacity 1/": "400",
                "Process Type 2/": "Reverberatory/Teniente Conv."
            },
            {
                "Location (Name)": "Paipote",
                "Latitude": "-27.42",
                "Longitude": "-70.28",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Empresa Nacional de Mineria (ENAMI)",
                "Status": "Operating",
                "Capacity 1/": "75",
                "Process Type 2/": "Reverberatory/Teniente Conv."
            },
            {
                "Location (Name)": "Las Ventanas",
                "Latitude": "-30.28",
                "Longitude": "-71.22",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Empresa Nacional de Mineria (ENAMI)",
                "Status": "Operating",
                "Capacity 1/": "115",
                "Process Type 2/": "Teniente Converter"
            },
            {
                "Location (Name)": "Potrerillos (El Salvador)",
                "Latitude": "-26.30",
                "Longitude": "-69.50",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Codelco Chile",
                "Status": "Operating",
                "Capacity 1/": "150",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Country": "China"
            },
            {
                "Location (Name)": "Baiyin, Gansu",
                "Latitude": "36.56",
                "Longitude": "104.21",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Baiyin Non-Ferrous Metals Co.",
                "Status": "Operating",
                "Capacity 1/": "65",
                "Process Type 2/": "Baiyin Furnace"
            },
            {
                "Location (Name)": "Changzhou, Jiangsu ",
                "Latitude": "31.78",
                "Longitude": "119.97",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Provincial Government",
                "Status": "Operating",
                "Capacity 1/": "35",
                "Process Type 2/": "Blast Furnace, Reverberatory"
            },
            {
                "Location (Name)": "Chengdu, Sichuan",
                "Latitude": "30.62",
                "Longitude": "104.10",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Sichuan Copper Nickel Co.",
                "Status": "Operating",
                "Capacity 1/": "3",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Chizhou, Anhui",
                "Latitude": "30.66",
                "Longitude": "117.48",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Provincial Government",
                "Status": "Operating",
                "Capacity 1/": "10",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Chongqing, Chongqing",
                "Latitude": "30.65",
                "Longitude": "103.68",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Nanfeng Medecine",
                "Status": "Operating",
                "Capacity 1/": "20",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Daye, Hubei",
                "Latitude": "30.08",
                "Longitude": "114.95",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Daye Nonferrous Metals Co.",
                "Status": "Operating",
                "Capacity 1/": "150",
                "Process Type 2/": "Noranda Converter/Reverberatory"
            },
            {
                "Location (Name)": "Fuyang, Zhejiang (Fuchunjiang)",
                "Latitude": "30.05",
                "Longitude": "119.95",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Hangzhou Construction Bureau",
                "Status": "Operating",
                "Capacity 1/": "10",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Guixi, Jiangxi",
                "Latitude": "28.28",
                "Longitude": "117.18",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Jiangxi Copper Co.",
                "Status": "Operating",
                "Capacity 1/": "250",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Houma, Shanxi",
                "Latitude": "35.61",
                "Longitude": "111.35",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Zhongtiaoshan Nonferrous Metals Group",
                "Status": "Operating",
                "Capacity 1/": "50",
                "Process Type 2/": "Ausmelt"
            },
            {
                "Capacity 1/": "30",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Huludao, Liaoning",
                "Latitude": "40.72",
                "Longitude": "121.00",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Huludao Zinc Co.",
                "Status": "Operating",
                "Capacity 1/": "60",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Tongling, Anhui (Jinchang)",
                "Latitude": "30.95",
                "Longitude": "117.78",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Tongling Nonferrous (Group) Co.",
                "Status": "Operating",
                "Capacity 1/": "65",
                "Process Type 2/": "Reverberatory/Ausmelt"
            },
            {
                "Location (Name)": "Jinchuan, Gansu",
                "Latitude": "31.50",
                "Longitude": "102.05",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Jinchuan Nonferrous Co.",
                "Status": "Operating",
                "Capacity 1/": "50",
                "Process Type 2/": "Flash Furnace"
            },
            {
                "Location (Name)": "Tongling, Anhui (Jinlong)",
                "Latitude": "30.95",
                "Longitude": "117.78",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Tongling Nonferrous (Group) Co. ",
                "Status": "Operating",
                "Capacity 1/": "130",
                "Process Type 2/": "Flash Furnace"
            },
            {
                "Location (Name)": "Liangshan, Shangdong",
                "Latitude": "30.68",
                "Longitude": "107.82",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Local Government",
                "Status": "Operating",
                "Capacity 1/": "10",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Shuikoushan, Hunan",
                "Latitude": "26.55",
                "Longitude": "112.59",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Shuikoushan Mining Co.",
                "Status": "Operating",
                "Capacity 1/": "6",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Wuhu, Anhui",
                "Latitude": "31.17",
                "Longitude": "118.55",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Hengxin Copper Industry Group Co.",
                "Status": "Operating",
                "Capacity 1/": "60",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Yantai, Shandong",
                "Latitude": "37.53",
                "Longitude": "121.57",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Provincial Government",
                "Status": "Operating",
                "Capacity 1/": "30",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Kunming, Yunnan ",
                "Latitude": "25.04",
                "Longitude": "102.72",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Yunnan Copper Industry Group",
                "Status": "Operating",
                "Capacity 1/": "230",
                "Process Type 2/": "Isasmelt, Electric"
            },
            {
                "Location (Name)": "Zhuzhou, Hunan",
                "Latitude": "27.83",
                "Longitude": "113.15",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Zhuzhou Smelter Co.",
                "Status": "Operating",
                "Capacity 1/": "10",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Country": "Congo"
            },
            {
                "Location (Name)": "Kolwesi (Luilu)",
                "Latitude": "-10.63",
                "Longitude": "25.35",
                "Facility ": "Electrowinning",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "La Generale des Carrieres et des Mines ",
                "Status": "Operating",
                "Capacity 1/": "30",
                "Process Type 2/": "Electrowinning (Low Grade)"
            },
            {
                "Location (Name)": "Likasi (Shituru)",
                "Latitude": "-11.02",
                "Longitude": "26.75",
                "Facility ": "Electrowinning",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "La Generale des Carrieres et des Mines",
                "Status": "Operating",
                "Capacity 1/": "30",
                "Process Type 2/": "Electrowinning (Low Grade)"
            },
            {
                "Country": "Finland"
            },
            {
                "Location (Name)": "Harjavalta",
                "Latitude": "61.32",
                "Longitude": "22.13",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Outokumpu Harjavalta Metals Oy",
                "Status": "Operating",
                "Capacity 1/": "160",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Country": "France"
            },
            {
                "Location (Name)": "Poissy",
                "Latitude": "48.93",
                "Longitude": "2.05",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Ste. Francaise d'Affinage du Cuivre",
                "Status": "Operating",
                "Capacity 1/": "10",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Country": "Germany"
            },
            {
                "Location (Name)": "Hettstedt",
                "Latitude": "51.65",
                "Longitude": "11.50",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Mansfeld Kupfer und Messing GmbH ",
                "Status": "Operating",
                "Capacity 1/": "96",
                "Process Type 2/": "Reverberatory/Blast"
            },
            {
                "Location (Name)": "Lunen (Huettenwerke Kayser)",
                "Latitude": "51.62",
                "Longitude": "7.52",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Norddeutsche Affinerie AG",
                "Status": "Operating",
                "Capacity 1/": "170",
                "Process Type 2/": "Isasmelt"
            },
            {
                "Location (Name)": "Hamburg (Norddeutsche Affinerie)",
                "Latitude": "53.55",
                "Longitude": "10.00",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Norddeutsche Affinerie AG",
                "Status": "Operating",
                "Capacity 1/": "420",
                "Process Type 2/": "Outokumpu, Contimelt, Electric"
            },
            {
                "Country": "Hungary"
            },
            {
                "Location (Name)": "Csepel",
                "Latitude": "47.40",
                "Longitude": "19.23",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Hungarian Government",
                "Status": "Operating",
                "Capacity 1/": "4",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Country": "India"
            },
            {
                "Location (Name)": "Dahej (Birla Copper)",
                "Latitude": "21.70",
                "Longitude": "72.58",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Indo Gulf Fertilisers and Chemical Corp.",
                "Status": "Operating",
                "Capacity 1/": "150",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Ghatsila ",
                "Latitude": "22.60",
                "Longitude": "86.48",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Hindustan Copper Ltd.",
                "Status": "Operating",
                "Capacity 1/": "27",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Bharuch (Jhagadja)",
                "Latitude": "21.70",
                "Longitude": "72.97",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Swil Ltd.",
                "Status": "Operating",
                "Capacity 1/": "50",
                "Process Type 2/": "Boliden Process (S)"
            },
            {
                "Location (Name)": "Khetri",
                "Latitude": "27.98",
                "Longitude": "75.80",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Hindustan Co. Ltd.",
                "Status": "Operating",
                "Capacity 1/": "35",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Tuticorin ",
                "Latitude": "8.78",
                "Longitude": "78.13",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Sterlite Industries (India) Ltd.",
                "Status": "Operating",
                "Capacity 1/": "150",
                "Process Type 2/": "Isasmelt"
            },
            {
                "Country": "Indonesia"
            },
            {
                "Location (Name)": "Gresik",
                "Latitude": "-7.15",
                "Longitude": "112.63",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Mitsubishi Materials Corp. ",
                "Status": "Operating",
                "Capacity 1/": "180",
                "Process Type 2/": "Mitsubishi Flash"
            },
            {
                "Country": "Iran"
            },
            {
                "Location (Name)": "Khatoonabad",
                "Latitude": "27.97",
                "Longitude": "57.70",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "National Iranian Copper Industries Co.",
                "Status": "Developing",
                "Capacity 1/": "80",
                "Process Type 2/": "Flash Furnace"
            },
            {
                "Country": "  ",
                "Location (Name)": "Sar Chesmeh",
                "Latitude": "28.46",
                "Longitude": "57.85",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "National Iranian Copper Industries Co.",
                "Status": "Operating",
                "Capacity 1/": "160",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Country": "Italy"
            },
            {
                "Location (Name)": "Porto Marghera",
                "Latitude": "45.45",
                "Longitude": "12.22",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "SIMAR SpA",
                "Status": "Closed",
                "Capacity 1/": "24",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Country": "Japan"
            },
            {
                "Location (Name)": "Besshi/Toyo, Ehime",
                "Latitude": "33.88",
                "Longitude": "133.32",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Sumitomo Metal Mining Co. Ltd.",
                "Status": "Operating",
                "Capacity 1/": "300",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Kosaka, Akita",
                "Latitude": "40.32",
                "Longitude": "140.74",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Dowa Mining Co. Ltd.",
                "Status": "Operating",
                "Capacity 1/": "96",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Naoshima, Kagawa",
                "Latitude": "34.45",
                "Longitude": "134.00",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Mitsubishi Materials Corp.",
                "Status": "Operating",
                "Capacity 1/": "270",
                "Process Type 2/": "Mitsubishi Continuous"
            },
            {
                "Location (Name)": "Onahama, Fukushima",
                "Latitude": "36.95",
                "Longitude": "140.90",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Onahama Smelting & Refining Co. Ltd.",
                "Status": "Operating",
                "Capacity 1/": "348",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Saganoseki, Oita",
                "Latitude": "33.24",
                "Longitude": "131.87",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Nippon Mining & Metals Co. Ltd.",
                "Status": "Operating",
                "Capacity 1/": "470",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Tamano, Okayama",
                "Latitude": "34.48",
                "Longitude": "133.93",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Hibi Kyodo Smelting Co. Ltd.",
                "Status": "Operating",
                "Capacity 1/": "263",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Country": "Kazakhstan"
            },
            {
                "Location (Name)": "Balkhash",
                "Latitude": "46.78",
                "Longitude": "75.00",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Samsung",
                "Status": "Operating",
                "Capacity 1/": "180",
                "Process Type 2/": "Reverberatory/Vanyukov"
            },
            {
                "Location (Name)": "Dzhezkazgan",
                "Latitude": "47.78",
                "Longitude": "67.77",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Samsung",
                "Status": "Operating",
                "Capacity 1/": "215",
                "Process Type 2/": "Electric/Reverberatory"
            },
            {
                "Location (Name)": "Irtysh",
                "Latitude": "53.33",
                "Longitude": "75.46",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Kazahmys (Samsung)",
                "Status": "Operating",
                "Capacity 1/": "20",
                "Process Type 2/": "Reverberatory/Kivcet"
            },
            {
                "Country": "Korea, North"
            },
            {
                "Location (Name)": "Hungnam ",
                "Latitude": "39.50",
                "Longitude": "127.23",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "North Korea Government",
                "Status": "Operating",
                "Capacity 1/": "40",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Nampo",
                "Latitude": "38.73",
                "Longitude": "125.41",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "North Korea Government",
                "Status": "Operating",
                "Capacity 1/": "40",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Country": "Korea, Republic of"
            },
            {
                "Location (Name)": "Onsan (Onsan I)",
                "Latitude": "35.42",
                "Longitude": "129.33",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "LG-Nikko Copper",
                "Status": "Operating",
                "Capacity 1/": "210",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Onsan (Onsan II)",
                "Latitude": "35.42",
                "Longitude": "129.33",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "LG-Nikko Copper",
                "Status": "Operating",
                "Capacity 1/": "240",
                "Process Type 2/": "Mitsubishi Continuous"
            },
            {
                "Country": "Mexico"
            },
            {
                "Location (Name)": "Nacozari de Garcia, Sonora (La Caridad)",
                "Latitude": "30.37",
                "Longitude": "-109.53",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Mexicana de Cobre S.A. de C.V.",
                "Status": "Operating",
                "Capacity 1/": "300",
                "Process Type 2/": "Outokumpu/Teniente Converter"
            },
            {
                "Location (Name)": "San Luis Potosi, San Luis Potosi",
                "Latitude": "22.15",
                "Longitude": "-100.98",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "IMMSA (Grupo Mexico S.A. de C.V.)",
                "Status": "Operating",
                "Capacity 1/": "30",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Toluca, Mexico",
                "Latitude": "19.29",
                "Longitude": "-99.67",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Cobre de Pasteje Ind. Unidas",
                "Status": "Closed",
                "Capacity 1/": "60",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Country": "Namibia"
            },
            {
                "Location (Name)": "Tsumeb ",
                "Latitude": "-22.83",
                "Longitude": "16.75",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Ongopolo Mining and Processing",
                "Status": "Operating",
                "Capacity 1/": "30",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Country": "Oman"
            },
            {
                "Location (Name)": "Sohar",
                "Latitude": "24.37",
                "Longitude": "56.74",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Oman Mining Co.",
                "Status": "Operating",
                "Capacity 1/": "35",
                "Process Type 2/": "Electric"
            },
            {
                "Country": "Peru"
            },
            {
                "Location (Name)": "IIo ",
                "Latitude": "-17.63",
                "Longitude": "-71.33",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Southern Peru Copper Corp.",
                "Status": "Operating",
                "Capacity 1/": "300",
                "Process Type 2/": "Reverberatory/Teniente Conv."
            },
            {
                "Location (Name)": "La Oroya",
                "Latitude": "-11.53",
                "Longitude": "-75.90",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Doe Run",
                "Status": "Operating",
                "Capacity 1/": "80",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Country": "Philippines"
            },
            {
                "Location (Name)": "Isabel (PASAR)",
                "Latitude": "10.93",
                "Longitude": "124.44",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Glencore International",
                "Status": "Operating",
                "Capacity 1/": "190",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Country": "Poland"
            },
            {
                "Location (Name)": "Glogow District (Glogow I)",
                "Latitude": "51.67",
                "Longitude": "16.08",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "KGHM Polska Miedz, S.A.",
                "Status": "Operating",
                "Capacity 1/": "220",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Glogow District (Glogow II)",
                "Latitude": "51.67",
                "Longitude": "16.08",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "KGHM Polska Miedz, S.A.",
                "Status": "Operating",
                "Capacity 1/": "205",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Wroclaw (Hutmen S.A.)",
                "Latitude": "51.15",
                "Longitude": "17.08",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Impexmetal",
                "Status": "Operating",
                "Capacity 1/": "9",
                "Process Type 2/": "Blast Furnace (S)"
            },
            {
                "Location (Name)": "Legnica ",
                "Latitude": "51.21",
                "Longitude": "16.16",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "KGHM Polska Miedz, S.A.",
                "Status": "Operating",
                "Capacity 1/": "93",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Country": "Romania"
            },
            {
                "Location (Name)": "Baia Mare",
                "Latitude": "47.67",
                "Longitude": "23.58",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Allied Deals Plc.",
                "Status": "Operating",
                "Capacity 1/": "35",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Zlatna",
                "Latitude": "46.12",
                "Longitude": "23.22",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Zlatna Metallurgical",
                "Status": "Operating",
                "Capacity 1/": "10",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Location (Name)": "Zlatna ",
                "Latitude": "46.12",
                "Longitude": "23.22",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Zlatna Metallurgical",
                "Status": "Operating",
                "Capacity 1/": "40",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Zlatna ",
                "Latitude": "46.12",
                "Longitude": "23.22",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Zlatna Metallurgical",
                "Status": "Operating",
                "Capacity 1/": "13",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Country": "Russia"
            },
            {
                "Location (Name)": "Karabash",
                "Latitude": "55.47",
                "Longitude": "60.25",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Karabash Smelter",
                "Status": "Operating",
                "Capacity 1/": "50",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Kirovgrad ",
                "Latitude": "57.44",
                "Longitude": "60.06",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Kirovograd JSC",
                "Status": "Operating",
                "Capacity 1/": "150",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Location (Name)": "Krasnouralsk ( Svyatogor)",
                "Latitude": "58.42",
                "Longitude": "60.00",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Svyatogor Smelter",
                "Status": "Operating",
                "Capacity 1/": "71",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Mednogorsk",
                "Latitude": "51.42",
                "Longitude": "57.58",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Depo-Service",
                "Status": "Operating",
                "Capacity 1/": "40",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Moscow",
                "Latitude": "55.75",
                "Longitude": "37.62",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Moscow Smelting & Refinering",
                "Status": "Operating",
                "Capacity 1/": "30",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Location (Name)": "Nadezhdinsky (Nadezhda)",
                "Latitude": "69.23",
                "Longitude": "87.88",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "MMC Norilsk ",
                "Status": "Operating",
                "Capacity 1/": "100",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Location (Name)": "Norlisk",
                "Latitude": "69.34",
                "Longitude": "88.22",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "MMC Norilsk ",
                "Status": "Operating",
                "Capacity 1/": "400",
                "Process Type 2/": "Reverb and Electric"
            },
            {
                "Location (Name)": "Pechenganikel",
                "Latitude": "69.33",
                "Longitude": "31.12",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "MMC Norilsk ",
                "Status": "Operating",
                "Capacity 1/": "20",
                "Process Type 2/": "Electric"
            },
            {
                "Location (Name)": "Monchegorsk (Severonikel)",
                "Latitude": "67.93",
                "Longitude": "32.87",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "MMC Norilsk ",
                "Status": "Operating",
                "Capacity 1/": "90",
                "Process Type 2/": "Electric"
            },
            {
                "Location (Name)": "Sredneuralsk (Revda)",
                "Latitude": "56.99",
                "Longitude": "60.47",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Sredneuralsk Copper Smelter",
                "Status": "Operating",
                "Capacity 1/": "110",
                "Process Type 2/": "Reverb/Blast/Vanyukov"
            },
            {
                "Country": "Serbia and Montenegro"
            },
            {
                "Location (Name)": "Bor",
                "Latitude": "44.08",
                "Longitude": "22.10",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Rudarsko-Topionicarski Basen Bor (RTB Bor)",
                "Status": "Operating",
                "Capacity 1/": "170",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Country": "Slovakia"
            },
            {
                "Location (Name)": "Krompachy",
                "Latitude": "48.92",
                "Longitude": "20.87",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Kovohute Krompachy",
                "Status": "Operating",
                "Capacity 1/": "20",
                "Process Type 2/": "Reverberatory (S)"
            },
            {
                "Country": "South Africa"
            },
            {
                "Location (Name)": "Springs ",
                "Latitude": "-26.27",
                "Longitude": "28.43",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Impala Platinum Ltd.",
                "Status": "Operating",
                "Capacity 1/": "7",
                "Process Type 2/": "Electric"
            },
            {
                "Location (Name)": "Nababeep (O'okiep)",
                "Latitude": "-29.60",
                "Longitude": "17.90",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Metorex",
                "Status": "Operating",
                "Capacity 1/": "50",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Phalaborwa ",
                "Latitude": "-23.98",
                "Longitude": "31.07",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Palabora Mining Co. Ltd.",
                "Status": "Operating",
                "Capacity 1/": "135",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Location (Name)": "Rustenburg ",
                "Latitude": "-25.67",
                "Longitude": "27.25",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Rustenburg Platinum Mines Ltd.",
                "Status": "Operating",
                "Capacity 1/": "7",
                "Process Type 2/": "Electric"
            },
            {
                "Location (Name)": "Western Platinum",
                "Latitude": "-25.67",
                "Longitude": "27.30",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Western Platinum Ltd.",
                "Status": "Operating",
                "Capacity 1/": "2",
                "Process Type 2/": "Electric"
            },
            {
                "Country": "Spain"
            },
            {
                "Location (Name)": "Asua-Bilbao",
                "Latitude": "43.18",
                "Longitude": "-2.56",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "ELMET",
                "Status": "Operating",
                "Capacity 1/": "32",
                "Process Type 2/": "Rotary Furnace (S)"
            },
            {
                "Location (Name)": "Huelva",
                "Latitude": "37.26",
                "Longitude": "-6.95",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Atlantic Copper S.A.",
                "Status": "Operating",
                "Capacity 1/": "320",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Country": "Sweden"
            },
            {
                "Location (Name)": "Skelleftehamn (Ronnskar)",
                "Latitude": "65.00",
                "Longitude": "21.60",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Boliden Metall A.B.",
                "Status": "Operating",
                "Capacity 1/": "240",
                "Process Type 2/": "Electric (TBRC)"
            },
            {
                "Country": "Turkey"
            },
            {
                "Location (Name)": "Samsun ",
                "Latitude": "41.28",
                "Longitude": "36.33",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Karadeniz Bakir Isletmelerei (KBI)",
                "Status": "Operating",
                "Capacity 1/": "42",
                "Process Type 2/": "Outokumpu Flash"
            },
            {
                "Country": "United States"
            },
            {
                "Location (Name)": "Garfield, Utah",
                "Latitude": "37.75",
                "Longitude": "-111.50",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Kennecott Utah Copper Co.",
                "Status": "Operating",
                "Capacity 1/": "320",
                "Process Type 2/": "Kennecott/Outokumpu"
            },
            {
                "Location (Name)": "Hayden, Arizona",
                "Latitude": "33.00",
                "Longitude": "-110.78",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "ASARCO Incorporated (Grupo Mexico S.A. de C.V.)",
                "Status": "Operating",
                "Capacity 1/": "210",
                "Process Type 2/": "Inco Flash"
            },
            {
                "Location (Name)": "Miami, Arizona",
                "Latitude": "33.38",
                "Longitude": "-110.87",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Phelps Dodge Corporation",
                "Status": "Operating",
                "Capacity 1/": "180",
                "Process Type 2/": "Isasmelt/Electric"
            },
            {
                "Country": "Uzbekistan"
            },
            {
                "Location (Name)": "Almalyk ",
                "Latitude": "40.85",
                "Longitude": "69.60",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Almalyk Mining and Metallurgical Combine",
                "Status": "Operating",
                "Capacity 1/": "140",
                "Process Type 2/": "Reverberatory/Oxy Flame"
            },
            {
                "Country": "Zambia"
            },
            {
                "Location (Name)": "Chambishi ",
                "Latitude": "-12.67",
                "Longitude": "28.00",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Avnim (SA)",
                "Status": "Operating",
                "Capacity 1/": "15",
                "Process Type 2/": "Electrowinning (RLE)"
            },
            {
                "Location (Name)": "Mufulira",
                "Latitude": "-12.53",
                "Longitude": "28.23",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Mopani Copper Mines Plc.",
                "Status": "Operating",
                "Capacity 1/": "180",
                "Process Type 2/": "Electric"
            },
            {
                "Location (Name)": "Nchanga ",
                "Latitude": "-12.52",
                "Longitude": "27.87",
                "Facility ": "Electrowinning",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Zambia Copper Investments Ltd.",
                "Status": "Operating",
                "Capacity 1/": "70",
                "Process Type 2/": "Electrowinning (Low Grade)"
            },
            {
                "Location (Name)": "Nkana-Kitwe (Nkana)",
                "Latitude": "-12.82",
                "Longitude": "28.20",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Zambia Consolidated Copper Mines Ltd.",
                "Status": "Operating",
                "Capacity 1/": "200",
                "Process Type 2/": "Reverberatory/Teniente Conv."
            },
            {
                "Location (Name)": "Nkana-Kitwe (Nkana)",
                "Latitude": "-12.82",
                "Longitude": "28.20",
                "Facility ": "Electrowinning",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Zambia Consolidated Copper Mines Ltd.",
                "Status": "Operating",
                "Capacity 1/": "14",
                "Process Type 2/": "Electrowinning (RLE)"
            },
            {
                "Country": "Zimbabwe"
            },
            {
                "Location (Name)": "Eiffel Flats ",
                "Latitude": "-18.32",
                "Longitude": "29.98",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Rio Tinto Mining (Zimbabwe)",
                "Status": "Operating",
                "Capacity 1/": "6",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Inyati ",
                "Latitude": "-18.22",
                "Longitude": "32.23",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Corsyn Consolidated Mines Ltd.",
                "Status": "Operating",
                "Capacity 1/": "5",
                "Process Type 2/": "Blast Furnace"
            },
            {
                "Location (Name)": "Alaska (Lomagundi) ",
                "Latitude": "-17.40",
                "Longitude": "30.02",
                "Facility ": "Smelter",
                "Commodity": "Cu",
                "Majority Ownership or Operating Company": "Mhangura Copper Mines (ZMDC)",
                "Status": "Operating",
                "Capacity 1/": "25",
                "Process Type 2/": "Reverberatory"
            },
            {
                "Country": "1/ Capacity in thousand metric tons."
            },
            {
                "Country": "2/ (RLE) = Roast Leach, (S) = secondary smelter, (TBRC) = Top Blown Rotary Converter"
            },
            {
                "Location (Name)": " "
            }
        ]
    }];

    let dataArray = data[0]['Copper Smelters'];
    let properArray = [];
    let locationsArray = [];
    console.log(dataArray);

    dataArray.forEach(function (obj) {
       if (obj.hasOwnProperty('Latitude') && obj.hasOwnProperty('Longitude')){
           properArray.push(obj);
       }
    });

    properArray.forEach(function (obj) {
        locationsArray.push({ long: obj.Longitude, lat: obj.Latitude });
    });

    console.log(properArray);
    console.log(locationsArray);



    // mapid is the id of the div where the map will appear
    const map = L
        .map('mapid')
        .setView([47, 10], 2);   // center position + zoom

    // Add a tile to the map = a background. Comes from OpenStreetmap
    L.tileLayer(
        'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>',
            maxZoom: 6,
        }).addTo(map);

    // Add a svg layer to the map
    L.svg().addTo(map);

    // Create data for circles:
    const markers = locationsArray;

    // Select the svg area and add circles:
    d3.select("#mapid")
        .select("svg")
        .selectAll("myCircles")
        .data(markers)
        .enter()
        .append("circle")
        .attr("cx", function(d){ return map.latLngToLayerPoint([d.lat, d.long]).x })
        .attr("cy", function(d){ return map.latLngToLayerPoint([d.lat, d.long]).y })
        .attr("r", 14)
        .style("fill", "red")
        .attr("stroke", "red")
        .attr("stroke-width", 3)
        .attr("fill-opacity", .4)

    // Function that update circle position if something change
    function update() {
        d3.selectAll("circle")
            .attr("cx", function(d){ return map.latLngToLayerPoint([d.lat, d.long]).x })
            .attr("cy", function(d){ return map.latLngToLayerPoint([d.lat, d.long]).y })
    }

    // If the user change the map (zoom or drag), I update circle position:
    map.on("moveend", update)

</script>
</body>
</html>
